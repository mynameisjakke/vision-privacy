<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Floating Button</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 2rem;
            background: #f5f5f5;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        button {
            padding: 1rem 2rem;
            margin: 0.5rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
        }
        .btn-primary {
            background: #007cba;
            color: white;
        }
        .btn-secondary {
            background: #f0f0f0;
            color: #333;
        }
        
        /* Floating Button Styles */
        .vision-privacy-floating-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 999998;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 1rem 1.5rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 50px;
            box-shadow: 0 4px 20px rgba(102, 126, 234, 0.4);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            animation: slideIn 0.5s ease-out;
        }
        
        @keyframes slideIn {
            from { transform: translateX(150px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .vision-privacy-floating-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 25px rgba(102, 126, 234, 0.5);
        }
        
        .floating-btn-icon {
            font-size: 1.5rem;
            animation: wiggle 2s infinite;
        }
        
        @keyframes wiggle {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-10deg); }
            75% { transform: rotate(10deg); }
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üß™ Floating Button Test</h1>
        <p>This page tests if the floating button appears correctly.</p>
        
        <h2>Step 1: Simulate Consent</h2>
        <button class="btn-primary" onclick="simulateConsent()">
            Simulate "Accept All" Click
        </button>
        
        <h2>Step 2: Check Results</h2>
        <div id="results" style="margin-top: 1rem; padding: 1rem; background: #f9f9f9; border-radius: 4px;">
            <p>Click the button above to simulate consent...</p>
        </div>
        
        <h2>Step 3: Look for Button</h2>
        <p>After clicking, look at the <strong>bottom-right corner</strong> of the page.</p>
        <p>You should see a purple button with a cookie icon üç™</p>
        
        <h2>Manual Controls</h2>
        <button class="btn-secondary" onclick="showButton()">Force Show Button</button>
        <button class="btn-secondary" onclick="hideButton()">Hide Button</button>
        <button class="btn-secondary" onclick="checkButton()">Check Button Status</button>
    </div>

    <script>
        function simulateConsent() {
            console.log('üéØ Simulating consent...');
            
            // Save consent to localStorage
            localStorage.setItem('vision-privacy-consent', JSON.stringify({
                siteId: 'test-site',
                categories: ['essential', 'analytics'],
                timestamp: new Date().toISOString()
            }));
            
            console.log('‚úÖ Consent saved to localStorage');
            
            // Create the floating button
            createFloatingButton();
            
            // Update results
            document.getElementById('results').innerHTML = `
                <p style="color: green;">‚úÖ Consent simulated successfully!</p>
                <p>LocalStorage: <code>${localStorage.getItem('vision-privacy-consent')}</code></p>
                <p><strong>Look at the bottom-right corner!</strong></p>
            `;
        }
        
        function createFloatingButton() {
            // Remove existing button if any
            const existing = document.getElementById('vision-privacy-floating-btn');
            if (existing) {
                existing.remove();
            }
            
            console.log('üé® Creating floating button...');
            
            const button = document.createElement('button');
            button.id = 'vision-privacy-floating-btn';
            button.className = 'vision-privacy-floating-btn';
            button.innerHTML = '<span class="floating-btn-icon">üç™</span><span class="floating-btn-text">Cookie-inst√§llningar</span>';
            
            button.addEventListener('click', function() {
                alert('Floating button clicked! This would reopen the settings modal.');
            });
            
            document.body.appendChild(button);
            console.log('‚úÖ Floating button created and added to page');
            
            // Verify it's visible
            setTimeout(() => {
                const btn = document.getElementById('vision-privacy-floating-btn');
                if (btn) {
                    const styles = window.getComputedStyle(btn);
                    console.log('üìä Button computed styles:', {
                        display: styles.display,
                        position: styles.position,
                        bottom: styles.bottom,
                        right: styles.right,
                        zIndex: styles.zIndex,
                        background: styles.background
                    });
                }
            }, 100);
        }
        
        function showButton() {
            createFloatingButton();
        }
        
        function hideButton() {
            const button = document.getElementById('vision-privacy-floating-btn');
            if (button) {
                button.remove();
                console.log('üóëÔ∏è Button removed');
            }
        }
        
        function checkButton() {
            const button = document.getElementById('vision-privacy-floating-btn');
            const consent = localStorage.getItem('vision-privacy-consent');
            
            const status = {
                buttonExists: !!button,
                consentExists: !!consent,
                buttonVisible: button ? window.getComputedStyle(button).display !== 'none' : false
            };
            
            console.log('üîç Button status:', status);
            alert(JSON.stringify(status, null, 2));
        }
    </script>
</body>
</html>